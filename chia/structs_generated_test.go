package chia

import (
	"encoding/hex"
	"strings"
	"testing"
)

const blockDataHex = `
00000000000000000000000000000000023641700004f48b0000000000000000000000f4bfdde18f06937280e408756c13bdeb9fc688820772284884bcb5ca30de6492aefec2ee6e80d67977a85d31b124ee761906ca550006b6af0ea76157cc0a56959b2b53da56e501b754f1cba750ed3e557c037e65c1fc9e948f2c61fe27
b23c78661633819c7412b73c13a2ba6bfb17cd4864e6f7273ff100ae376e038f07e4b1bc65b6c858dfcd59e6dc05b4a1c201b45f6e995923c35683b7286a58673bfdf7b15fc9469fa2089b20000001008703460c5ce49168c72edea30b46fb1cee210dc782492b2b640f61dbc0254f93e47e77356852ceb54d543b557152cc53
f2d4b0f81a19795f8c8f6eab2322c4c94a4017aa7213d8ad47450a234b4a1a1492cb9a697177b8348cf8d2c2fbc1f5ef8e92bb3fa5b695fa42a7aa03f90739b516c66c1da39e980494d06827e4b3ffb5146418feab809d3892f61156aea3cbdaa245bf46069399e2a16069e6b979835168b8334fb04ca0cc2eb24bdbddb9dbb9
6ecac64b95da7e307c2f937cd6695ea0ea9befce728dd9011df02d857ded4e6264fafcf293821d18d47394f25195163a0d06d5a25132310b7a5a9151deb202baf647aeef2eeb215fbbc794da25c3722701937280e408756c13bdeb9fc688820772284884bcb5ca30de6492aefec2ee6e800000000000a2c0000100cf228fe6cd
35d4660657e7265a1683d46d63a203940ba5c168160be16cb3b97eca2ecdf1d56e5ff0d3587a5f7aa1482511de2659af7c52452259be3cb3f9251418fed9c0ecb023d2bb82de7fb17dc475b794fccee13094915f71baff9b5a0c0002018da56b3fd9bd8600f5b0643c12e37e1160ae6dba011c2c4d62ecfadd38629537289c88
f4852933e5ad17b6822bd3c0d30064c25f07ef06fb080f0521430e3a1711f4bbaa44823f4ca8d4bc6540c57ad6fda785a784b20f106a1c9342d72f3a3a937280e408756c13bdeb9fc688820772284884bcb5ca30de6492aefec2ee6e80000000000105e18f0200b1dc45824c8bc4c79168c42464e088c4e2f7cde3d9b88392f2
329c5c3b13d673e561c732d1a85fac34974f6763d6fd9506facabbeb7c8f566319bc38c674be103feba44f63316a23a40ebe738337189d451e9255c3daa55ec34a142497dd4209040101ca8a37089e6717953c2a726f24f423983dd2bb0aaf0c15a65e84f19c2bfa09ca000000000008cc10020090dbb97fe2632b1ffd6ae3ec
43a973252c2f75a6855cba7dc4081e938ba18081d97c7aae9edb1bef42b36bee4ff337b1a831a34d0ba3f95c7ce7d44fd5849903f3adc067c994378c9db86722fd4768f4fb5b8e403105a9f064fce63a30eb5c08020080d752392b2ffa9aceb00439181f7f32d5596f7d120ec6c8aaa534c7b2b891b74b4ab1cce2845d6b2f79
bf9db9dd935c064db7dea3a5ea5f94ac68ecc83cbe438c62c92db760d69fe8236b57690957b8faafa260b50d4da311acf669bebf11e5fb48bdce22cfe642063ad51307a358206fcd06df240dbe3b75595a73b53cf5c3000000000044e8f10100b33b15f4ea1ef90ff33a550ab72e099d9a985a529212b88f1a792ddf171f2f23
1d7f30f926b7dede18ebf67fd36c38e4c064549dad25349cdfa7f7db502f3c253baf17829a1394415aacff628e8c39245c64965afe041790f26eff7864ace0170100012864d4b742ed3248b5d07e7ebbb6f298b2355346c63bb6ea68f99bb101cb5067000000000044e8f103004d2dcb072878c32db3ddc31544ab79e414d692
439a9489f6272a84e57df9d38a33259c5ec0a30ca0353394e2cc68945c6d8f561b6d90db2f4a9aee3fd57b483e1acc12fa3bcea4442fbbbab56920d4894a1fce05aad0eb0bcacbed34a7c24e1401000101020000017e0200ab04b4df7a60b713535e9ff3b87f20c3589f83b777b6ccefb96fb9ab6fba01ed16a7f5daa6ca0e35
47fa7c2eb0005812783e4cc9e767be4942f4aaf288031200c303ec6a0f7b10d09532311f14d8506f2bf58ae765a5ec00fb1b8fde9d7e4b005509000000000001f46486514073b14dfd4f6ab42c2aa391008b7c5c946342a7bc78bc0de84373c321034300002e763d3cf17671cc2b76cc186602e6ad54a8eb61ca4b56fb2d93ab
fe0cca71201c6b85b649134682c549a6bd30c2e6787fa40a80b0828177a80704015b33d202bf43194121f7cb73b75e51a87352d8ebc76ff2642ba39e26cd934143dc2ec9030201000000000005dd2cbf079a861f69d518f6d621419fbe92a9b63068590c65ac4ac56b7d7f1a669648c3020044f9ff85b01041176ea014d0e324
92f0c7841e1f863cfaf5bc741b439266c50679992ceffab1181f5e8e4a7c99d349dc4ecad6efde9f60d666aa38108f25873c490747a411c2ae0cb91e9a02a9bec200d0412500e1f8d0c9dbdc97062d70553c010000020000017e000089b4a4838be795d6fee19d817d43e8d5eb5019d16f41c2bf127158780c8466531ae9159a
65832ef1ecfc606a1f8fb9bb80cd38217e82d2417f5e9e4fb4031927891a8f1c52dd950d472cd97eed3a4bdd61b29c1c3faac793597941fd04202801010000000000000f4fec9df973242209bf12c18b9647df4aeaf9e8108c2d0648ecc9842e0593b865559f9f02005000e402334c05dcd424b9b34b1d06a1528be88b9ad0e9
aa4af7a5e16c3eb0a43a16d7986cb7f3def1ae55be971f3d3a846098705b8449a2fba98472f1467f3d15974bff1a5201667150e2d1447a935fca7fd9138757ce8f12956a992b3a0e40010000000000002df08c8445e044a080f290a16454ff70582d59c65d30b44c6e637a28eb8ce0605ce2e4010000c0e03d0aba70cd90d6e7
8d2ea02275dcd40ef1b268b53cfcfe24c04b75e0539a5d834d9b85f5149ead85ecef0c62626812a4f2c7491a03e41de49d968da48a5bd96a72f560b8a990b8c404c325c4930c42922c76c9bccc7433d5bc1e953db25a01000001020000017e0300757fdf15dd34951411d22e594494b6fad9479f306d53ed70b8b324f27f0544
d934736ba5fcded2044f01e63473858ae2f572c0113d6f304d9c0782d925d97f0f29bb2de7b7e3d64239b7754d14d3973fc620a3fee4a27a944356e6d8401dd20f0201000000000001f464dff36ded673c0a361062973cc96748896b015f323e4a25f2670ef719ed27bd892f000000baa188b93d2b5910ea8bc1be4ce9d1ab01
423483c36d1b0be73bd03ab24029d87d3557a22823ebf648a59663a843db688db20a14fbfe7e6d5bb7da85d2bc20b93e73144d3d3697b548c73d301c2440517196623db2e341f66f7035e48a95170100000000000005dd2cbf307783d106c4168e7b2736616a984cccd61dab392082cb8d835b919da5934a1b0200260ae99c94
513dd06dce358966fa1fded469f7fc4f943a5d190b1ba6c10d226f81d7e9785742638f6c0f38a1a42b4a5b34d37d7abf611e9b773392a3b3efb34783a484607810326e53d27b78fd58eeb652a03ee8b77960078a1f4efb7e0fdf32010000020000017e0100f2ca2c475bbb304ca367da7c883ee0441bf02b3f9e0405d4a811a8
50ead2fe5af886a5e8a4d3c26a77c6fa26608e3845fb5eff9ce3a3bf0ff5fc3f1eb071f014b9540770721aca1b90eef20c62784b23d555c76251d319c86bdedd90f35fe60d010000000000000f4fece39c283c51711a6218d4601bceb98cd2b40c1c7399b42000142684d8cca062cec100007d8785552e8094cf40b36a7e2552
a05dcd612921641964a7266cd9f215245a2137789e2b55512c35169c145a52f1ed5564031afc6052e96f1ef274b1aadffd0daf1e560ffa1d547fa5de8ed33283e30eb491b1f9f8f387803de817003814a209070600000000002df08cd536f4e3dceafc3139995a4b19702488832f8e19be3e61c7f86cf1de355aae937101003e
d92865f291535728b034c90c10ad9fcfd01a2e9fa5b6776c3ed0506c93c88518a1a10816a74038c8a597d2766cd3f01b3dcd169f40341be6dedcc47136c660ebf693e90a8967f9834943e5cb607a94343fb745fc6329f989438c9c9af35e4e01000001020000017e020089cba46fcb6103f6dd4926a1515f2ac072f6cca3d089
4b80e2c8318bf176e178838b73a8710d174765fef5ddf926807d5d2d424eb06e114fc1d68d854e0b73565702dc59bcb9d7a7a544e4d7ca6f33c461708b053f4a428ee00427761b512014010000000000000f4fecea9ffdca5ab4fb568c9999d418dfefcbc3b6985250c4dcc0acc419804a848ff15b0000f05293b1684a34ebd5
eec7b1f8bb1c99b56c4f9a89391bd5e231c07cd347cf6bf69245ce057ca4572b0d0a545cde9968e93b4483bfad43f5cd0404d1fc904a5fc38c8987e31a9d031772d0b419348326253b34eb84ed9868a730ff5805f23a65010000000000002df08c9e804c9f763360c915143ec765bf928f0834b97c8e0dc3a9f2764232900fe3
8e290300536613efe4903067dc11ef2e4de70077b3942561efac65f3ca6011a96cfbc6830b55a7b1af817a60d1e9d342dfce2e56e763d32b0766c7229ce6a861d9eacf01d125586d17d26471e7d78489c43da3ef389d0ddd804a40cc542a96eb84c9e9020100001f06f653dc4f49e0cb7377ac939a75c7e6e37d124fd950f482
d8a87ee925ca0c76f0b7f8d3e04fbba7e76e3521e97015538f78a241b64e092fb01526e7414b379c4a39af2d197d883c789cfbf326f0f2bec9c256e823dcf29267e674e4fb488f4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba0000000001a680c952e2b7e051b8a0eb3fc1b1436f7f196bfd
4e3062b5ab6df68d01e61c52aaec28366f8ef3eead965cd9407c9c44031b7ae1e7154c65a710d1aca75fd5fcef121d633f2ea2765a5c9b758cdccc6ac8b0d9e0c52418fba59e6f385e1c4e534bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba0000000000000000000000000000000000000000
000000000000000003a2c7c98511b4713b72a74fb67502aecad23da5789245fd6074c29c098c901f4867dc5917813d52983bb3e06e0e26c70e292f350ab5945b4db71b2f4e9303cbc4daed640b2a352be7c78bcfe19547a1d83e7ff0e3a8e086a6da19ea0f02e67de14612bb0195757ca55cc8a5028333248fb1297152bcaaad
f7574008a2c008330a73ce27f001afcbb6de18b0b558562cfb2084497c3f1a875e2d053ce81abe61bc2103888a1fc63d5ca5c71ed1ecb2e8e6ef94212714062993b48fbf489c6794f6c6e0eb38e05153ed5f981b099a3ec29d7dd360e193630f42c524d701e9ad07444d3244d32f01a6507629aeed05f7ee067703d93b94e43c
7ddacee91ea174e8a88b7ba5730fd20000000060aa602c45050fc8efc9e0ab2ac8f7e7d15031b0653c0e67ff7945cfc4f3e9afbe3224b346d7ac0c6e448a9792e87f2ceeb8c1d7c8d818dc6fc57274311db74738c54e1392a47f0f343ba66cd1607fecb0f6f1bd5c29a36feb81e6f0c0cb08451b9a8a0b161578812180803714
f40c072e3e93fb618ca87339d4930159ec4208db7948030119b3c602851b48a8a952d88671e341a3179567af0a7d0dc9c3c3ddc59c8397f31e2c416b2c1a565803d357875b3f189b050a2a754660f174aaafef13f2c8391196dfb7bdb68ad671e5c0d9ce66325c191367a9db7071482fd1fc8cfd9ecad7ae93311cdb71739790
6b6b5099649c3406102d5483f250a4b140db53a2ec3bd8b2eaf76a511b325430f95128a2e12a808c023508c03a1076493d4cc16524be9ad000000000000000000000000002d6a9fa00000002ccd5bb71183532bff220ba46c268991a0000000000000000000000000004f4884bc6435b409bcbabe53870dae0f03755f6aabb45
94c5915ec983acf12a5d1fba000001977420dc003ff07eb358e8255a65c30a2dce0e5fbb0000000000000000000000000004f4884bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba0000003d006e176001ff02ffff01ff02ffff01ff04ffff02ff02ffff04ff02ffff04ff05ffff04ff0bffff04
ff5fffff04ff81bfffff04ffff0cff82027fff17ff2f80ff8080808080808080ff8080ffff04ffff01ff02ffff03ff17ffff01ff04ffff02ff0bffff04ff2fffff04ff05ffff04ff5fffff04ff27ff808080808080ffff02ff02ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fffff04ff5fff80808080808080
8080ff8080ff0180ff018080ffff04ffff01ff02ff02ffff04ffff0eff05ff0bff1780ff808080ffff04ffff01ff04ff47ffff04ffff02ff05ffff04ff02ffff04ff0bffff04ff8197ffff01ff84ff0180808080808080ffff04ff81a7ff81d7808080ffff04ffff0127ffff04ffff01820115ffff04ffff01ffffffa0ccd5bb
71183532bff220ba46c268991a0000000000000000000000000004f1e4ff8601977420dc0080ffffb1b0a20c84703250ddb6484f3d87e1634f3125895a800927f517a56b023f4e054545c4b9399b592c2845302bf2a21e85b24dffff80ffff01ffff33ffa0b0f8aa183f70e4aa0c0330b15570a0e4fa63a7761ecf18f44f8270
f6cde8de68ff8601d1a94a200080ffff3cffa03b9633661839d2378fe9009facf537da15efe640977329b259007915ca044b5b8080ff80808080ffffffa03ff07eb358e8255a65c30a2dce0e5fbb0000000000000000000000000004f1e4ff853a3529440080ffffb1b0a20c84703250ddb6484f3d87e1634f3125895a800927
f517a56b023f4e054545c4b9399b592c2845302bf2a21e85b24dffff80ffff01ffff3dffa0b71b2474b7f0562f8d9118c20a0f49c959c8a441f42aebc87c2d8c74765ac67d8080ff80808080ffffffa0c0635e2d3ee5090b1d36ad056cf25d7f45644ec54659fd4a53a8ed881ff6e42bff8207a080ffffb1b0b403a01fbc28b5
043f07446fc93c968f70139f09615b685ecfa1f54a5f2a8a07ca13b272ff1a7531b1cf718e88b52b4bffff80ffff01ffff33ffa025b9da79c4c9d8920b7491c65843cc097eb5e2df6e6bf221b8018666531d9119ff6480ffff33ffa00f646a9ada797499b128e52dad566f96c7008f269f76a00206c8bc6b7c002965ff82073c
80ffff3cffa0cb3ba716e33964b51d34a4101666f1dfc3304dfadc904f8fa4bf44996685ecca8080ff80808080ffffffa05a3c432870ecf349618acf6878cde976499e771cca872361dd5dc98886519f98ff82063680ffffb1b08d821b04f14eb93159c15c737c5c81786161237a6ac92affe3bc7ac635ff06046fc8408d9451
5235933e1b22909c7632ffff80ffff01ffff33ffa07a9c4625694e97350869f1538aa53d3f3bc1c46b8c567a97d6d62fd328c3d251ff6480ffff33ffa09d0ded6f0e3b6ae0bb75eb4097facf3a7eded22fd479c7c0e84f56b96b560188ff8205d280ffff3cffa0efd97b2618e439297952bcdcbab2c241344a2f058d343af8f2
12f0341bff9f038080ff80808080ffffffa053ec9cf6fc438883ff8108f1a6853a923681e50082579c26d8370b58c0bfa5f9ff8207a080ffffb1b09683ba6eb8bee29a101976f8c39bbe571509e1c6f7f906a73218db0b7d09828351bc212ae49fd45dbddf41163cdba379ffff80ffff01ffff33ffa091b404fb15f8c2ed52e6
af4b796fa26bd8dc9145f2c81a09743774308f0229cbff6480ffff33ffa0ae030db60035aa8ee1083d2dbad6436900427253159257a2eb8d8e5a1835c722ff82073c80ffff3cffa0fe353e47ad8d91f4826411e550c751c50f96baea5b67d2a4631dccc49ebd12a98080ff80808080ffffffa05eee09a8c5866a96af4d73db66
ce4cb203f2cf4da382432469f9b688213339f9ff82063580ffffb1b0a3e05b8c9c14280c28c805a7c189ab634f2125fcd4c3e067dbdd68a029805b8aa4e596aa13180cc7771390413fb413acffff80ffff01ffff33ffa06ab9af98406b5f29f661bed5c82d5fadf3a22ac74a9a0fdcec659bf693228ae9ff6480ffff33ffa003
d146cc946f7efd03bb92f61e1439b4502c0e29ca881eb5365d87287790e44eff8205d180ffff3cffa099c3c4b477ad61a8d8e2fe923563f6f22b84c5852cc2e3d0ff96f8cd3c5e118b8080ff8080808080ff0180808080808000000001000491d5`

func BenchmarkFullBlockFromBytes(b *testing.B) {
	bytes, err := hex.DecodeString(strings.Replace(blockDataHex, "\n", "", -1))
	if err != nil {
		panic(err)
	}
	buf := NewParseBuf(bytes)
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		buf.pos = 0
		FullBlockFromBytes(buf)
	}
	buf.ensureEmpty()
	if buf.err != nil {
		panic(err)
	}
}
